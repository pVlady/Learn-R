# Пакет `tibble`
Термин *tibble* относится к фрейму данных, представленныдх классом `tbl_df`.
Этот класс реализован с целью переопределить поведение по умолчанию класса `data.frame`.

## Поведение объектов класса `tbl_df`
* символьные вектора не приводятся принудительно к типу факторов
* имена столбцов не изменяются и возвращаются аргументом `names`.
* Расширение векторов происходит только для векторов длиной 1, т.к. расширение векторов длинной более 1 элемента к длинне других векторов фрейма часто приводит к ошибкам.
* Имена столбцов не заполняются (отсутствующие заполняются автоматически). Пустые и дублирующиеся имена столбцов категорически не рекомендуются.
* Имена строк не добавляются и настоятельно не рекомендуются к использованию. Атрибут `row.names` добавлент только для совместимости и только для запроса количества строк.
* `df[, j]` возвращает `tibble`, а не вектор; значение по умолчанию - `df[, j, drop = FALSE]`.

## Создание фреймов
`tibble(..., .rows = NULL, .name_repair = c("check_unique", "unique", "universal", "minimal"))`  
Аргументом `.rows` указывается число строк.  
Аргумент `.name_repair` контролирует заголовки столбцов:
* `minimal` — без проверки, кроме самого наличия имени столбца
* `unique` — имя должно быть уникальное и не пустое
* `check_unique` — имя должно быть уникальное
* `universal` — делает имена уникальными и синтетическими

Метод `tibble_row(..., .name_repair = c("check_unique", "unique", "universal", "minimal") )` создает фрейм с одной строкой. Векторные столбцы должны иметь длинну в один элемент, не векторные приводятся к типу список с одним элементом.

Метод `new_tibble(x, ..., nrow = NULL, class = NULL, subclass = NULL)` создает фрейм с минимальными проверками в угоду производительности.

Метод `as_tibble(x, .rows, .name_repair = c("check_unique", "unique", "universal", "minimal"))` преобразует фрейм или матрицу к типу `tbl_df`.  
Метод `as_tibble_row(x, .name_repair = c("check_unique", "unique", "universal", "minimal"))` преобразует вектор в объект `tibble` с одной строкой.  
Метод `as_tibble_col(x, column_name = "value")` преобразует вектор в объект `tibble` с одним столбцом.

#### Построчное создание фрейма: метод `tribble()
```r
tribble(
  ~a, ~b, ~c,                ; заголовки столбцов
  1, "2000-01-01", "1.5"
) %>%
  dplyr::mutate(
    dplyr::across(a, as.integer),
    dplyr::across(b, as.Date)
  )
```
Создание матрицы
```r
frame_matrix(
  ~col1, ~col2,
  1,     3,
  5,     2
)
```

## Вывод на экран
```r
print(as_tibble(mtcars), n = 3, width = 50)            ; указывается число строк и ширина таблицы в сиимволах
view(as_tibble(mtcars), title = 'Date frame', n = 10)  ; вывод фрейма в отдельное окно
```


## References
[О tibble](https://bestpractices.netlify.app/r_language/tidyverse/tibble_tidyverse)  
